<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
	xmlns:camel="http://camel.apache.org/schema/spring"
	xmlns:camelcxf="http://camel.apache.org/schema/cxf"
	xmlns:soap="http://cxf.apache.org/bindings/soap"
	xmlns:util="http://www.springframework.org/schema/util"	
	xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
  				http://camel.apache.org/schema/spring http://camel.apache.org/schema/spring/camel-spring.xsd
				http://camel.apache.org/schema/cxf http://camel.apache.org/schema/cxf/camel-cxf.xsd
				http://cxf.apache.org/bindings/soap http://cxf.apache.org/schemas/configuration/soap.xsd
				http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util.xsd">

	<bean id="bounds" class="org.onvif.ver10.schema.IntRectangle">
		<property name="X"><value>0</value></property>
		<property name="Y"><value>0</value></property>
		<property name="width"><value>640</value></property>
		<property name="height"><value>480</value></property>
	</bean>
	<bean id="imageSettings" class="org.onvif.ver10.schema.ImagingSettings">
		<property name="brightness"><value>0.5</value></property>
		<property name="colorSaturation"><value>0.5</value></property>
		<property name="contrast"><value>0.5</value></property>
		<property name="sharpness"><value>0.5</value></property>
	</bean>	
	<bean id="videoSource1" class="org.onvif.ver10.schema.VideoSource" >
		<property name="token"><value>videotoken1</value></property>
		<property name="resolution"><ref bean="videoResolution" /></property>
		<property name="imaging"><ref bean="imageSettings" /></property>
	</bean>			
	<bean id="videoSource2" class="org.onvif.ver10.schema.VideoSource" >
		<property name="token"><value>videotoken2</value></property>
		<property name="resolution"><ref bean="videoResolution" /></property>
		<property name="imaging"><ref bean="imageSettings" /></property>
	</bean>			
	<bean id="videoSourceCfg" class="org.onvif.ver10.schema.VideoSourceConfiguration" >
		<property name="name"><value>videosrcname</value></property>
		<property name="token"><value>videosrctoken</value></property>
		<property name="sourceToken"><value>videotoken1</value></property>
		<property name="bounds"><ref bean="bounds" /></property>
	</bean>
	<bean id="videoResolution" class="org.onvif.ver10.schema.VideoResolution" >
		<property name="width"><value>640</value></property>
		<property name="height"><value>480</value></property>
	</bean>
	<bean id="videoEncoderCfg" class="org.onvif.ver10.schema.VideoEncoderConfiguration" >
		<property name="name"><value>encodername</value></property>
		<property name="token"><value>encodertoken</value></property>
		<property name="resolution"><ref bean="videoResolution" /></property>
		<property name="encoding"><util:constant static-field="org.onvif.ver10.schema.VideoEncoding.H_264"/></property>
	</bean>
	<bean id="ptzCfg" class="org.onvif.ver10.schema.PTZConfiguration" >
		<property name="name"><value>ptzname</value></property>
		<property name="token"><value>ptztoken</value></property>
		<property name="nodeToken"><value>nodeToken</value></property>
	</bean>
	<bean id="ptzFilter" class="org.onvif.ver10.schema.PTZFilter" >
	</bean>
	<bean id="eventCfg" class="org.onvif.ver10.schema.EventSubscription" >
	</bean>	
	<bean id="metadataCfg" class="org.onvif.ver10.schema.MetadataConfiguration" >
		<property name="name"><value>metaname</value></property>
		<property name="token"><value>metatoken</value></property>
		<property name="analytics"><value>false</value></property>
		<property name="PTZStatus"><ref bean="ptzFilter" /></property>
		<property name="events"><ref bean="eventCfg" /></property>
	</bean>
	<bean id="profile" class="org.onvif.ver10.schema.Profile" >
		<property name="name"><value>profilename</value></property>
		<property name="token"><value>profiletoken</value></property>
		<property name="videoSourceConfiguration"><ref bean="videoSourceCfg" /></property>
		<property name="videoEncoderConfiguration"><ref bean="videoEncoderCfg" /></property>
		<property name="PTZConfiguration"><ref bean="ptzCfg" /></property>
		<property name="metadataConfiguration"><ref bean="metadataCfg" /></property>
	</bean>

	<bean id="AdminUser" class="org.onvif.ver10.schema.User">
		<property name="username"><value>admin</value></property>
		<property name="userLevel"><util:constant static-field="org.onvif.ver10.schema.UserLevel.ADMINISTRATOR"/></property>
	</bean> 

	<routeContext id="RessourcesRoutes" xmlns="http://camel.apache.org/schema/spring">
		<route>
			<from uri="direct:getProfile" />
			<setBody><simple>${ref:profile}</simple></setBody>
			<to uri="mock:getProfile" />
		</route>	
		<route>
			<from uri="direct:getAdminUser" />
			<setBody><simple>${ref:AdminUser}</simple></setBody>
			<to uri="mock:getAdminUser" />
		</route>		
		

		<route>
			<from uri="direct:createUserTable" />
			<setHeader headerName="body"><simple>${body}</simple></setHeader>
			<setBody>
				<constant>create table if not exists USERS(id varchar primary key not null, msg varchar)</constant>
			</setBody>
			<to uri="jdbc:dataSource"/>    
			<setBody><simple>${header.body}</simple></setBody>
			<to uri="mock:dataSource"/>    
		</route>		
			
		<route>
			<from uri="direct:getUserList" />
			<to uri="direct:createUserTable" />
			<setBody>
				<constant>select * from USERS</constant>
			</setBody>
			<to uri="jdbc:dataSource"/>     		
		</route>		
		<route>
			<from uri="direct:addUser" />
			<to uri="direct:createUserTable" />
			<setBody>
				<simple>insert into USERS values('${header.username}','${body}')</simple>
			</setBody>
			<to uri="jdbc:dataSource"/>     		
		</route>		
		<route>
			<from uri="direct:delUser" />
			<to uri="direct:createUserTable" />
			<setBody>
				<simple>delete from USERS where id='${header.username}'</simple>
			</setBody>
			<to uri="jdbc:dataSource"/>     		
		</route>		
	</routeContext>
</beans>